{"version":3,"file":"admin/lp-migration-learndash.js","mappings":"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","sources":["webpack://learnpress-import-export/webpack/bootstrap","webpack://learnpress-import-export/webpack/runtime/define property getters","webpack://learnpress-import-export/webpack/runtime/hasOwnProperty shorthand","webpack://learnpress-import-export/webpack/runtime/make namespace object","webpack://learnpress-import-export/./assets/src/js/admin/lp-migration-learndash.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * LearnDash to LearnPress Migration Handler\r\n * Class-based implementation for managing the migration process.\r\n */\r\nclass LearnDashMigration {\r\n    constructor() {\r\n        this.wrapper = document.querySelector('.lp-migration-wrapper .content.learndash');\r\n        if (!this.wrapper) return;\r\n\r\n        this.restNamespace = LP_ADDON_IMPORT_EXPORT_GLOBAL_OBJECT?.rest_namespace || '';\r\n        this.bodyNode = document.querySelector('body');\r\n\r\n        // Step totals from localized script\r\n        this.stepTotals = {\r\n            content: parseInt(LP_ADDON_IMPORT_EXPORT_GLOBAL_OBJECT?.learndash_content_total) || 100,\r\n            student_migrate: parseInt(LP_ADDON_IMPORT_EXPORT_GLOBAL_OBJECT?.learndash_student_migrate_total) || 100,\r\n        };\r\n\r\n        // SVG Icons\r\n        this.icons = {\r\n            checked: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 1.33333C4.3181 1.33333 1.33333 4.3181 1.33333 8C1.33333 11.6819 4.3181 14.6667 8 14.6667C11.6819 14.6667 14.6667 11.6819 14.6667 8C14.6667 4.3181 11.6819 1.33333 8 1.33333ZM0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z\" fill=\"#34C759\"/>\r\n                <path d=\"M11.0685 5.4759L7.54764 9.62136L5.58892 7.66984C5.37262 7.45166 5.03615 7.4759 4.81985 7.66984C4.60355 7.88802 4.62758 8.22742 4.81985 8.4456L7.01891 10.6153C7.16311 10.7608 7.35538 10.8335 7.54764 10.8335C7.73991 10.8335 7.93218 10.7608 8.07638 10.6153L11.8376 6.2759C12.0539 6.05772 12.0539 5.71833 11.8376 5.50014C11.6213 5.28196 11.2848 5.28196 11.0685 5.4759Z\" fill=\"#34C759\"/>\r\n            </svg>`,\r\n            unchecked: `<svg width=\"16\" height=\"17\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M8 1.83333C4.3181 1.83333 1.33333 4.8181 1.33333 8.5C1.33333 12.1819 4.3181 15.1667 8 15.1667C11.6819 15.1667 14.6667 12.1819 14.6667 8.5C14.6667 4.8181 11.6819 1.83333 8 1.83333ZM0 8.5C0 4.08172 3.58172 0.5 8 0.5C12.4183 0.5 16 4.08172 16 8.5C16 12.9183 12.4183 16.5 8 16.5C3.58172 16.5 0 12.9183 0 8.5Z\" fill=\"#8A8888\"></path>\r\n                <path d=\"M11.0688 5.9759L7.54789 10.1214L5.58916 8.16984C5.37286 7.95166 5.03639 7.9759 4.82009 8.16984C4.60379 8.38802 4.62783 8.72742 4.82009 8.9456L7.01915 11.1153C7.16335 11.2608 7.35562 11.3335 7.54789 11.3335C7.74016 11.3335 7.93242 11.2608 8.07662 11.1153L11.8379 6.7759C12.0542 6.55772 12.0542 6.21833 11.8379 6.00014C11.6216 5.78196 11.2851 5.78196 11.0688 5.9759Z\" fill=\"#8A8888\"></path>\r\n            </svg>`,\r\n            loader: `<div class=\"loader\"></div>`,\r\n        };\r\n\r\n        // Popups\r\n        this.popups = {\r\n            beforeMigrate: document.querySelector('#lp-before-migrate-popup'),\r\n            clearData: document.querySelector('#lp-clear-migrated-data-popup'),\r\n            success: document.querySelector('#lp-migrate-success-popup'),\r\n        };\r\n\r\n        this.initElements();\r\n        this.bindEvents();\r\n    }\r\n\r\n    initElements() {\r\n        this.statusNode = this.wrapper.querySelector('.status');\r\n        this.autoMigrateBtn = this.wrapper.querySelector('#lp-auto-migrate-btn.learndash');\r\n        this.clearDataBtn = this.wrapper.querySelector('#lp-clear-migrate-btn');\r\n\r\n        // Migration steps configuration\r\n        this.steps = {\r\n            content: this.getStepElements('.step-content'),\r\n            student_migrate: this.getStepElements('.step-student-migrate'),\r\n        };\r\n\r\n        this.migrateItemCheckboxes = this.wrapper.querySelectorAll('.migrate-item .migrate-item-checkbox');\r\n    }\r\n\r\n    getStepElements(selector) {\r\n        const node = this.wrapper.querySelector(selector);\r\n        if (!node) return null;\r\n        return {\r\n            node,\r\n            progressBar: node.querySelector('.progress-bar'),\r\n            total: node.querySelector('.migrated-total'),\r\n            icon: node.querySelector('.migrate-item-checkbox'),\r\n        };\r\n    }\r\n\r\n    bindEvents() {\r\n        this.bindAutoMigration();\r\n        this.bindClearData();\r\n        this.bindSuccessPopup();\r\n    }\r\n\r\n    bindAutoMigration() {\r\n        if (!this.autoMigrateBtn || !this.popups.beforeMigrate) return;\r\n\r\n        this.autoMigrateBtn.addEventListener('click', () => {\r\n            this.popups.beforeMigrate.classList.add('active');\r\n            this.bodyNode.classList.add('lp-no-scroll');\r\n        });\r\n\r\n        const closeBeforeMigratePopup = () => {\r\n            this.popups.beforeMigrate.classList.remove('active');\r\n            this.bodyNode.classList.remove('lp-no-scroll');\r\n        };\r\n\r\n        const migrateBtn = this.popups.beforeMigrate.querySelector('button.migrate-now');\r\n        migrateBtn?.addEventListener('click', () => {\r\n            closeBeforeMigratePopup();\r\n            this.autoMigrateBtn.disabled = true;\r\n            this.reset();\r\n            this.removeStatus();\r\n            this.migrate();\r\n        });\r\n\r\n        // Close popup on cancel button or close icon click\r\n        this.popups.beforeMigrate.querySelector('button.cancel')?.addEventListener('click', closeBeforeMigratePopup);\r\n        this.popups.beforeMigrate.querySelector('.dashicons-no-alt')?.addEventListener('click', closeBeforeMigratePopup);\r\n    }\r\n\r\n    bindClearData() {\r\n        if (!this.clearDataBtn || !this.popups.clearData) return;\r\n\r\n        this.clearDataBtn.addEventListener('click', () => {\r\n            this.popups.clearData.classList.add('active');\r\n            this.bodyNode.classList.add('lp-no-scroll');\r\n        });\r\n\r\n        const closeClearDataPopup = () => {\r\n            this.popups.clearData.classList.remove('active');\r\n            this.bodyNode.classList.remove('lp-no-scroll');\r\n        };\r\n\r\n        // Close popup on cancel button or close icon click\r\n        this.popups.clearData.querySelector('button.cancel')?.addEventListener('click', closeClearDataPopup);\r\n        this.popups.clearData.querySelector('.dashicons-no-alt')?.addEventListener('click', closeClearDataPopup);\r\n\r\n        const clearMigratedBtn = this.popups.clearData.querySelector('button.clear-migrated');\r\n        clearMigratedBtn?.addEventListener('click', (event) => {\r\n            event.preventDefault();\r\n            closeClearDataPopup();\r\n            this.clearDataBtn.disabled = true;\r\n            this.setAllCheckboxes(this.icons.loader);\r\n\r\n            wp.apiFetch({\r\n                path: `/${this.restNamespace}/delete-migrated-data/learndash`,\r\n                method: 'DELETE',\r\n            }).then((res) => {\r\n                if (res.status === 'success') {\r\n                    this.showStatus(res.msg, 'success');\r\n                    this.reset();\r\n                    this.autoMigrateBtn.disabled = false;\r\n                } else {\r\n                    this.showStatus(res.msg, 'error');\r\n                }\r\n            }).catch((err) => {\r\n                console.error(err);\r\n            }).finally(() => {\r\n                this.clearDataBtn.disabled = false;\r\n            });\r\n        });\r\n    }\r\n\r\n    bindSuccessPopup() {\r\n        if (!this.popups.success) return;\r\n\r\n        const closePopup = () => {\r\n            this.popups.success.classList.remove('active');\r\n            this.bodyNode.classList.remove('lp-no-scroll');\r\n        };\r\n\r\n        this.popups.success.querySelector('a.remove-popup')?.addEventListener('click', closePopup);\r\n        this.popups.success.querySelector('.bg-overlay')?.addEventListener('click', closePopup);\r\n        this.popups.success.querySelector('.view-report')?.addEventListener('click', (event) => {\r\n            event.preventDefault();\r\n            closePopup();\r\n            window.location.reload();\r\n        });\r\n    }\r\n\r\n    reset() {\r\n        Object.values(this.steps).forEach((step) => {\r\n            if (step) {\r\n                step.progressBar.style.width = '0%';\r\n                step.total.innerHTML = '0';\r\n            }\r\n        });\r\n        this.setAllCheckboxes(this.icons.unchecked);\r\n    }\r\n\r\n    removeStatus() {\r\n        this.statusNode.innerHTML = '';\r\n        this.statusNode.classList.remove('lp-migration-success', 'lp-migration-error');\r\n    }\r\n\r\n    showStatus(msg, type) {\r\n        this.statusNode.innerHTML = msg;\r\n        this.statusNode.classList.remove('lp-migration-success', 'lp-migration-error');\r\n        this.statusNode.classList.add(`lp-migration-${type}`);\r\n    }\r\n\r\n    setAllCheckboxes(html) {\r\n        this.migrateItemCheckboxes.forEach((el) => {\r\n            el.innerHTML = html;\r\n        });\r\n    }\r\n\r\n    setLoading(item) {\r\n        const step = this.steps[item];\r\n        if (step?.icon && !step.icon.querySelector('.loader')) {\r\n            step.icon.innerHTML = this.icons.loader;\r\n        }\r\n    }\r\n\r\n    migrate(paged = 1, item = 'content') {\r\n        this.setLoading(item);\r\n        const number = 20;\r\n\r\n        wp.apiFetch({\r\n            path: `/${this.restNamespace}/migrate/learndash`,\r\n            method: 'POST',\r\n            data: { paged, number, item },\r\n        }).then((res) => {\r\n            if (res.status === 'success') {\r\n                this.updateProgress(item, res.data);\r\n\r\n                if (res.data?.next_migrate_item) {\r\n                    this.migrate(res.data.next_page, res.data.next_migrate_item);\r\n                } else {\r\n                    this.onMigrationComplete(item, res);\r\n                }\r\n            } else {\r\n                this.showStatus(res.msg, 'error');\r\n            }\r\n        }).catch((err) => {\r\n            console.error(err);\r\n        });\r\n    }\r\n\r\n    updateProgress(item, data) {\r\n        const step = this.steps[item];\r\n        if (!step) return;\r\n\r\n        const current = data?.migrated_total || 0;\r\n        const stepTotal = this.stepTotals[item] || 100;\r\n        const percentage = Math.min(100, ((current / stepTotal) * 100).toFixed(0));\r\n\r\n        if (step.progressBar) {\r\n            step.progressBar.style.width = `${percentage}%`;\r\n        }\r\n        if (step.total) {\r\n            step.total.innerHTML = current;\r\n        }\r\n\r\n        if (data?.next_migrate_item && data.next_migrate_item !== item && step.icon) {\r\n            step.icon.innerHTML = this.icons.checked;\r\n        }\r\n    }\r\n\r\n    onMigrationComplete(item, res) {\r\n        this.showStatus(res.msg, 'success');\r\n        this.clearDataBtn.disabled = false;\r\n\r\n        if (item === 'student_migrate' && this.steps.student_migrate?.icon) {\r\n            this.steps.student_migrate.icon.innerHTML = this.icons.checked;\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.displaySuccessPopup(res.data);\r\n        }, 1000);\r\n    }\r\n\r\n    displaySuccessPopup(data) {\r\n        if (!this.popups.success) return;\r\n        const result = this.popups.success.querySelector('.migrate-result');\r\n        result.innerHTML = data.migrate_success_html;\r\n        this.popups.success.classList.add('active');\r\n        this.bodyNode.classList.add('lp-no-scroll');\r\n    }\r\n}\r\n\r\n// Initialize on DOM ready\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    new LearnDashMigration();\r\n});\r\n\r\nexport default LearnDashMigration;\r\n"],"names":["LearnDashMigration","constructor","wrapper","document","querySelector","restNamespace","LP_ADDON_IMPORT_EXPORT_GLOBAL_OBJECT","rest_namespace","bodyNode","stepTotals","content","parseInt","learndash_content_total","student_migrate","learndash_student_migrate_total","icons","checked","unchecked","loader","popups","beforeMigrate","clearData","success","initElements","bindEvents","statusNode","autoMigrateBtn","clearDataBtn","steps","getStepElements","migrateItemCheckboxes","querySelectorAll","selector","node","progressBar","total","icon","bindAutoMigration","bindClearData","bindSuccessPopup","addEventListener","classList","add","closeBeforeMigratePopup","remove","migrateBtn","disabled","reset","removeStatus","migrate","closeClearDataPopup","clearMigratedBtn","event","preventDefault","setAllCheckboxes","wp","apiFetch","path","method","then","res","status","showStatus","msg","catch","err","console","error","finally","closePopup","window","location","reload","Object","values","forEach","step","style","width","innerHTML","type","html","el","setLoading","item","paged","number","data","updateProgress","next_migrate_item","next_page","onMigrationComplete","current","migrated_total","stepTotal","percentage","Math","min","toFixed","setTimeout","displaySuccessPopup","result","migrate_success_html"],"sourceRoot":""}